==RFC2544 test==

       +-----------------+     
  eth0 |                 | eth1
    +-<|TG   tester0   TA|<-+
    |  |                 |  |
    |  +-----------------+  |
    |                       |
    |  +-----------------+  |
    |  |      dut0       |  |
    +->|       ->        |>-+
  eth0 |                 | eth1
       +-----------------+


python ./rfc2544.py --config=../topology-localhost.xml --dst-node=tester0 \
--dst-node-interface=eth1 --src-node=tester0 --src-node-interface=eth0 \
--dst-mac-address="70:B3:D5:EC:20:01" --src-mac-address="70:B3:D5:EC:20:00" \
--src-ipv4-address="192.0.2.1" --src-ipv4-udp-port=49184 \
--dst-ipv4-address="192.0.2.2" --frame-size=64 \
--testframe-type=dynamic | grep "^#"

#=RFC2544 Benchmark - Loopback Spark-V2=
#==Frame size 64 octets==
#===Throughput===
##1 1488095 pps 100.00% ... OK
#
#===Latency===
#Measurement style - bit forwarding
#Measuring at the calculated maximum throughput (see preceding Throughput section)
#
##1  880 ns
##2  880 ns
##3  880 ns
##4  880 ns
##5  880 ns
##6  880 ns
##7  880 ns
##8  880 ns
##9  880 ns
##10 880 ns
##11 880 ns
##12 880 ns
##13 880 ns
##14 880 ns
##15 880 ns
##16 880 ns
##17 880 ns
##18 880 ns
##19 880 ns
##20 880 ns
#
#===Frame loss rate===
##1 100% ... 0.00%
##2 90%  ... 0.00%
#
#===Back to back frames===
#Burst length limit is set to 1 sec 1488095 frames
#
##1        2 OK
##2        4 OK
##3        8 OK
##4       16 OK
##5       32 OK
##6       64 OK
##7      128 OK
##8      256 OK
##9      512 OK
##10    1024 OK
##11    2048 OK
##12    4096 OK
##13    8192 OK
##14   16384 OK
##15   32768 OK
##16   65536 OK
##17  131072 OK
##18  262144 OK
##19  524288 OK
##20 1048576 OK
##21 1488095 OK
#


==Custom testing using the universal trial function==

Usage:
# set-net topology-ietf110.xml
# python ./test-rfc2544-trial.py --config=../topology-ietf110.xml \
 --test-time=5 --frame-size=1500 --interframe-gap=1000 \
 --src-node=tester0 --src-node-port=eth0 --dst-node=tester0 \
 --dst-node-port=eth1 --testframe-type=dynamic \
 --frame-data=`traffic-generator-make-testframe --frame-size=1500 \
 --dst-mac-address="70:b3:d5:ec:20:01" --src-mac-address="70:b3:d5:ec:20:00" \
 --src-ipv4-address="192.0.2.1" --src-ipv4-udp-port=49184 \
 --dst-ipv4-address="192.0.2.2" --dst-ipv4-udp-port=7`
 ...
5-config-tester0.xml - end
Transaction 5 started: 2021-03-05T14:09:04
Transaction 5 completed: 2021-03-05T14:09:04
Test time:                             5
Generated packets:                250000
Received  packets:                249894
Lost packets:                        106
Lost packets percent:           0.042400
Sequence errors:                      52
Sequence errors percent:        0.020800
Latency Min[nanoseconds]:          71810
Latency Max[nanoseconds]:       29179790

==With default static testframe==
# python ./test-rfc2544-trial.py --config=../topology-ietf110.xml \
--test-time=5 --frame-size=1500 --interframe-gap=15000 \
--src-node=tester0 --src-node-port=eth0 --dst-node=tester0 \
--dst-node-port=eth1 --frame-data=`traffic-generator-make-testframe \
--frame-size=1500 --dst-mac-address="70:b3:d5:ec:20:01" \
--src-mac-address="70:b3:d5:ec:20:00" --src-ipv4-address="192.0.2.1" \
--src-ipv4-udp-port=49184 --dst-ipv4-address="192.0.2.2" \
--dst-ipv4-udp-port=7`


==Self-test==
Usage:
# ./test-network-interconnect-tester.py --config=../topology.xml \
 --interface=analyzer.ge0 --interface=analyzer.xe0 \
 --interface=local.ge15 --interface=local.xe2 --interface=local.xe3 \
 --test-internal-loopback=true --test-analyzer=true

Output:

+------------------------------------------------------------------------------------------------+
| Port \ Run    |    1   |    2   |    3   |    4   |    5   |    6   |    7   |    8   |    9   |
+------------------------------------------------------------------------------------------------+
| NORM          |  98.70 |  76.19 |  50.00 |  50.00 |   5.00 |  50.00 |   5.00 |  10.00 |  76.19 |
|------------------------------------------------------------------------------------------------|
| analyzer.ge0  | 101.40 |  76.45 |  50.18 |  51.34 |   5.02 |  50.94 |   5.02 |  10.02 |  76.62 |
|------------------------------------------------------------------------------------------------|
| local.ge15    | 101.37 |  76.41 |  50.16 |  51.33 |   5.01 |  50.98 |   5.02 |  10.05 |  76.66 |
|------------------------------------------------------------------------------------------------|
| local.xe3     |  97.85 |  55.10 |  76.91 |  56.40 |  12.65 |  72.83 |  12.52 |  13.32 |  55.27 |
|------------------------------------------------------------------------------------------------|
| local.xe2     |  97.91 |  55.12 |  76.96 |  56.43 |  12.65 |  72.88 |  12.53 |  13.33 |  55.30 |
|------------------------------------------------------------------------------------------------|
| analyzer.xe0  | 101.37 |  76.41 |  50.16 |  51.32 |   5.01 |  50.92 |   5.02 |  10.02 |  76.59 |
+------------------------------------------------------------------------------------------------+

Yes there is a problem exposed in the output.



